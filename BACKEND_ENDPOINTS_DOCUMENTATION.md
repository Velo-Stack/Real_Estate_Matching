# ุชูุซูู ุฌููุน Endpoints ุงูู Backend

> ุชู ุฅูุดุงุก ูุฐุง ุงูููู ูุชุณููู ุงูุนูู ุนูู ุงูู Frontend ูููู ูู endpoint ูุง ุงูุฐู ูููู ุจู

---

## ๐ ุฌุฏูู ุงููุญุชููุงุช

1. [Authentication - ุงููุตุงุฏูุฉ](#authentication)
2. [Offers - ุงูุนุฑูุถ](#offers)
3. [Requests - ุงูุทูุจุงุช](#requests)
4. [Matches - ุงููุทุงุจูุงุช](#matches)
5. [Users - ุงููุณุชุฎุฏููู](#users)
6. [Notifications - ุงูุชูุจููุงุช](#notifications)
7. [Dashboard - ููุญุฉ ุงูุชุญูู](#dashboard)
8. [Audit Logs - ุณุฌูุงุช ุงูุชุฏููู](#audit)
9. [Reports - ุงูุชูุงุฑูุฑ](#reports)

---

## Authentication

### 1. Login - ุชุณุฌูู ุงูุฏุฎูู

```
POST /auth/login
```

**ุงููุตู:** ุชุณุฌูู ุงููุณุชุฎุฏู ูุงูุญุตูู ุนูู JWT Token

**ูุชุทูุจุงุช ุงูุทูุจ:**

```json
{
  "email": "user@example.com",
  "password": "password123"
}
```

**ุงูุงุณุชุฌุงุจุฉ ุงููุงุฌุญุฉ (200):**

```json
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "user": {
    "id": 1,
    "name": "ุฃุญูุฏ ูุญูุฏ",
    "email": "user@example.com",
    "role": "BROKER"
  }
}
```

**ุงูุฃุฎุทุงุก ุงููุญุชููุฉ:**

- `401`: ุจูุงูุงุช ุงุนุชูุงุฏ ุบูุฑ ุตุญูุญุฉ

---

### 2. Get Me - ุงูุญุตูู ุนูู ุจูุงูุงุช ุงููุณุชุฎุฏู ุงูุญุงูู

```
GET /auth/me
Authorization: Bearer {token}
```

**ุงููุตู:** ุงูุญุตูู ุนูู ุจูุงูุงุช ุงููุณุชุฎุฏู ุงููุณุฌู ุญุงููุงู

**ุงูุงุณุชุฌุงุจุฉ ุงููุงุฌุญุฉ (200):**

```json
{
  "id": 1,
  "name": "ุฃุญูุฏ ูุญูุฏ",
  "email": "user@example.com",
  "role": "BROKER"
}
```

---

## Offers

### 1. Create Offer - ุฅูุดุงุก ุนุฑุถ ุฌุฏูุฏ

```
POST /offers
Authorization: Bearer {token}
```

**ุงูุตูุงุญูุงุช ุงููุทููุจุฉ:** ADMIN, MANAGER, BROKER

**ุงููุตู:** ุฅูุดุงุก ุนุฑุถ ุฌุฏูุฏ (ุนูุงุฑ ููุจูุน ุฃู ููุชุฃุฌูุฑ)

**ูุชุทูุจุงุช ุงูุทูุจ:**

```json
{
  "type": "Apartment", // ููุน ุงูุนูุงุฑ
  "usage": "Residential", // ุงูุงุณุชุฎุฏุงู
  "landStatus": "Freehold", // ุญุงูุฉ ุงูุฃุฑุถ
  "city": "Cairo", // ุงููุฏููุฉ
  "district": "Downtown", // ุงูุญู
  "areaFrom": 100, // ุงููุณุงุญุฉ ูู
  "areaTo": 150, // ุงููุณุงุญุฉ ุฅูู
  "priceFrom": 1000000, // ุงูุณุนุฑ ูู
  "priceTo": 1500000, // ุงูุณุนุฑ ุฅูู
  "exclusivity": "Exclusive", // ุงูุญุตุฑูุฉ
  "description": "ุดูุฉ ุฌูููุฉ", // ุงููุตู
  "coordinates": "30.0444,31.2357" // ุงูุฅุญุฏุงุซูุงุช (GPS)
}
```

**ุงูุงุณุชุฌุงุจุฉ ุงููุงุฌุญุฉ (201):**

```json
{
  "id": 1,
  "type": "Apartment",
  "city": "Cairo",
  "areaFrom": 100,
  "areaTo": 150,
  "priceFrom": 1000000,
  "priceTo": 1500000,
  "createdById": 1,
  "createdAt": "2026-01-28T10:00:00Z"
}
```

**ููุงุญุธุฉ:** ุนูุฏ ุฅูุดุงุก ุนุฑุถ ุฌุฏูุฏุ ูุชู ุชุดุบูู ูุธุงู ุงููุทุงุจูุฉ ุชููุงุฆูุงู ููุจุญุซ ุนู ุทูุจุงุช ูุชุทุงุจูุฉ

---

### 2. Get Offers - ุงูุญุตูู ุนูู ุฌููุน ุงูุนุฑูุถ

```
GET /offers?type=Apartment&usage=Residential&minPrice=1000000&maxPrice=2000000
Authorization: Bearer {token}
```

**ุงูุตูุงุญูุงุช ุงููุทููุจุฉ:** ADMIN, MANAGER, BROKER

**ุงููุตู:** ุงูุญุตูู ุนูู ูุงุฆูุฉ ุจุฌููุน ุงูุนุฑูุถ ูุน ุฅููุงููุฉ ุงูููุชุฑุฉ

**ูุนุงููุงุช ุงูุงุณุชุนูุงู (Query Parameters):**
| ุงููุนุงูู | ุงูููุน | ุงููุตู |
|--------|-------|-------|
| type | string | ููุน ุงูุนูุงุฑ (ูุซูุงู: Apartment, Villa) |
| usage | string | ุงูุงุณุชุฎุฏุงู (Residential, Commercial) |
| city | string | ุงููุฏููุฉ |
| district | string | ุงูุญู |
| minPrice | number | ุฃูู ุณุนุฑ |
| maxPrice | number | ุฃุนูู ุณุนุฑ |
| minArea | number | ุฃูู ูุณุงุญุฉ |
| maxArea | number | ุฃูุจุฑ ูุณุงุญุฉ |
| brokerId | number | ูุนุฑูู ุงูุณูุณุงุฑ (ูุนุฑุถ ุนุฑูุถู ููุท) |

**ุงูุงุณุชุฌุงุจุฉ ุงููุงุฌุญุฉ (200):**

```json
[
  {
    "id": 1,
    "type": "Apartment",
    "usage": "Residential",
    "city": "Cairo",
    "district": "Downtown",
    "areaFrom": 100,
    "areaTo": 150,
    "priceFrom": 1000000,
    "priceTo": 1500000,
    "exclusivity": "Exclusive",
    "description": "ุดูุฉ ุฌูููุฉ",
    "coordinates": "30.0444,31.2357",
    "createdById": 1,
    "createdBy": {
      "id": 1,
      "name": "ุฃุญูุฏ ูุญูุฏ",
      "role": "BROKER"
    },
    "createdAt": "2026-01-28T10:00:00Z"
  }
]
```

---

### 3. Update Offer - ุชุญุฏูุซ ุนุฑุถ

```
PUT /offers/{id}
Authorization: Bearer {token}
```

**ุงูุตูุงุญูุงุช ุงููุทููุจุฉ:** ADMIN, MANAGER, BROKER (ุงูู Broker ููููู ุชุญุฏูุซ ุนุฑูุถู ููุท)

**ุงููุตู:** ุชุญุฏูุซ ุจูุงูุงุช ุนุฑุถ ููุฌูุฏ

**ูุชุทูุจุงุช ุงูุทูุจ:** ููุณ ูุนุงููุงุช ุงูุฅูุดุงุก (ูููู ุชุญุฏูุซ ุฃู ูููุง)

**ุงูุงุณุชุฌุงุจุฉ ุงููุงุฌุญุฉ (200):** ุงูุนุฑุถ ุงููุญุฏูุซ

---

### 4. Delete Offer - ุญุฐู ุนุฑุถ

```
DELETE /offers/{id}
Authorization: Bearer {token}
```

**ุงูุตูุงุญูุงุช ุงููุทููุจุฉ:** ADMIN, MANAGER, BROKER (ุงูู Broker ููููู ุญุฐู ุนุฑูุถู ููุท)

**ุงููุตู:** ุญุฐู ุนุฑุถ ูู ุงููุธุงู

**ุงูุงุณุชุฌุงุจุฉ ุงููุงุฌุญุฉ (200):**

```json
{
  "message": "Offer deleted"
}
```

---

## Requests

### 1. Create Request - ุฅูุดุงุก ุทูุจ ุฌุฏูุฏ

```
POST /requests
Authorization: Bearer {token}
```

**ุงูุตูุงุญูุงุช ุงููุทููุจุฉ:** ADMIN, MANAGER, BROKER

**ุงููุตู:** ุฅูุดุงุก ุทูุจ ุฌุฏูุฏ ูู ุนููู (ูุจุญุซ ุนู ุนูุงุฑ)

**ูุชุทูุจุงุช ุงูุทูุจ:**

```json
{
  "type": "Apartment", // ููุน ุงูุนูุงุฑ ุงููุทููุจ
  "usage": "Residential", // ุงูุงุณุชุฎุฏุงู ุงููุทููุจ
  "landStatus": "Freehold", // ุญุงูุฉ ุงูุฃุฑุถ ุงููุทููุจุฉ
  "city": "Cairo", // ุงููุฏููุฉ
  "district": "Downtown", // ุงูุญู ุงููุทููุจ
  "areaFrom": 100, // ุงููุณุงุญุฉ ูู
  "areaTo": 150, // ุงููุณุงุญุฉ ุฅูู
  "budgetFrom": 1000000, // ุงูููุฒุงููุฉ ูู
  "budgetTo": 1500000, // ุงูููุฒุงููุฉ ุฅูู
  "priority": "High" // ุงูุฃููููุฉ (High, Medium, Low)
}
```

**ุงูุงุณุชุฌุงุจุฉ ุงููุงุฌุญุฉ (201):**

```json
{
  "id": 1,
  "type": "Apartment",
  "city": "Cairo",
  "budgetFrom": 1000000,
  "budgetTo": 1500000,
  "priority": "High",
  "createdById": 1,
  "createdAt": "2026-01-28T10:00:00Z"
}
```

**ููุงุญุธุฉ:** ุนูุฏ ุฅูุดุงุก ุทูุจ ุฌุฏูุฏุ ูุชู ุชุดุบูู ูุธุงู ุงููุทุงุจูุฉ ุชููุงุฆูุงู ููุจุญุซ ุนู ุนุฑูุถ ูุชุทุงุจูุฉ

---

### 2. Get Requests - ุงูุญุตูู ุนูู ุฌููุน ุงูุทูุจุงุช

```
GET /requests?type=Apartment&city=Cairo&minBudget=1000000
Authorization: Bearer {token}
```

**ุงูุตูุงุญูุงุช ุงููุทููุจุฉ:** ADMIN, MANAGER, BROKER

**ุงููุตู:** ุงูุญุตูู ุนูู ูุงุฆูุฉ ุจุฌููุน ุงูุทูุจุงุช ูุน ุฅููุงููุฉ ุงูููุชุฑุฉ

**ูุนุงููุงุช ุงูุงุณุชุนูุงู:**
| ุงููุนุงูู | ุงูููุน | ุงููุตู |
|--------|-------|-------|
| type | string | ููุน ุงูุนูุงุฑ |
| usage | string | ุงูุงุณุชุฎุฏุงู |
| city | string | ุงููุฏููุฉ |
| district | string | ุงูุญู |
| minBudget | number | ุฃูู ููุฒุงููุฉ |
| maxBudget | number | ุฃุนูู ููุฒุงููุฉ |
| minArea | number | ุฃูู ูุณุงุญุฉ |
| maxArea | number | ุฃูุจุฑ ูุณุงุญุฉ |
| priority | string | ุงูุฃููููุฉ |

**ุงูุงุณุชุฌุงุจุฉ ุงููุงุฌุญุฉ (200):**

```json
[
  {
    "id": 1,
    "type": "Apartment",
    "usage": "Residential",
    "city": "Cairo",
    "areaFrom": 100,
    "areaTo": 150,
    "budgetFrom": 1000000,
    "budgetTo": 1500000,
    "priority": "High",
    "createdById": 1,
    "createdBy": {
      "id": 1,
      "name": "ุฃุญูุฏ ูุญูุฏ",
      "role": "BROKER"
    },
    "createdAt": "2026-01-28T10:00:00Z"
  }
]
```

---

### 3. Update Request - ุชุญุฏูุซ ุทูุจ

```
PUT /requests/{id}
Authorization: Bearer {token}
```

**ุงูุตูุงุญูุงุช ุงููุทููุจุฉ:** ADMIN, MANAGER, BROKER (ุงูู Broker ููููู ุชุญุฏูุซ ุทูุจุงุชู ููุท)

**ุงููุตู:** ุชุญุฏูุซ ุจูุงูุงุช ุทูุจ ููุฌูุฏ

**ุงูุงุณุชุฌุงุจุฉ ุงููุงุฌุญุฉ (200):** ุงูุทูุจ ุงููุญุฏูุซ

---

### 4. Delete Request - ุญุฐู ุทูุจ

```
DELETE /requests/{id}
Authorization: Bearer {token}
```

**ุงูุตูุงุญูุงุช ุงููุทููุจุฉ:** ADMIN, MANAGER, BROKER (ุงูู Broker ููููู ุญุฐู ุทูุจุงุชู ููุท)

**ุงููุตู:** ุญุฐู ุทูุจ ูู ุงููุธุงู

**ุงูุงุณุชุฌุงุจุฉ ุงููุงุฌุญุฉ (200):**

```json
{
  "message": "Request deleted"
}
```

---

## Matches

### 1. Get Matches - ุงูุญุตูู ุนูู ุงููุทุงุจูุงุช

```
GET /matches
Authorization: Bearer {token}
```

**ุงูุตูุงุญูุงุช ุงููุทููุจุฉ:** ADMIN, MANAGER, BROKER

**ุงููุตู:** ุงูุญุตูู ุนูู ูุงุฆูุฉ ุงููุทุงุจูุงุช ุจูู ุงูุนุฑูุถ ูุงูุทูุจุงุช

- **ููู ADMIN ู MANAGER:** ูุฑูู ุฌููุน ุงููุทุงุจูุงุช
- **ููู BROKER:** ูุฑูู ููุท ุงููุทุงุจูุงุช ุงูุชู ุชุชุถูู ุนุฑูุถูู ุฃู ุทูุจุงุชูู

**ุงูุงุณุชุฌุงุจุฉ ุงููุงุฌุญุฉ (200):**

```json
[
  {
    "id": 1,
    "offerId": 5,
    "requestId": 10,
    "score": 92.5, // ูุณุจุฉ ุงูุชุทุงุจู (0-100)
    "status": "NEW", // ุญุงูุฉ ุงููุทุงุจูุฉ
    "offer": {
      "id": 5,
      "type": "Apartment",
      "city": "Cairo",
      "priceFrom": 1000000,
      "user": {
        "name": "ุฃุญูุฏ ูุญูุฏ",
        "email": "ahmed@example.com"
      }
    },
    "request": {
      "id": 10,
      "type": "Apartment",
      "city": "Cairo",
      "budgetFrom": 1000000,
      "user": {
        "name": "ูุญูุฏ ุนูู",
        "email": "ali@example.com"
      }
    },
    "createdAt": "2026-01-28T10:00:00Z"
  }
]
```

---

### 2. Update Match Status - ุชุญุฏูุซ ุญุงูุฉ ุงููุทุงุจูุฉ

```
PATCH /matches/{id}
Authorization: Bearer {token}
```

**ุงูุตูุงุญูุงุช ุงููุทููุจุฉ:** ADMIN, MANAGER, BROKER

**ุงููุตู:** ุชุญุฏูุซ ุญุงูุฉ ุงููุทุงุจูุฉ (ููุชุชุจุน ูู ุฃูู ุงุชุตุงู ุฅูู ุฅุบูุงู ุงูุตููุฉ)

**ูุชุทูุจุงุช ุงูุทูุจ:**

```json
{
  "status": "CONTACTED" // ูู: NEW, CONTACTED, NEGOTIATION, CLOSED, REJECTED
}
```

**ุงูุงุณุชุฌุงุจุฉ ุงููุงุฌุญุฉ (200):**

```json
{
  "id": 1,
  "offerId": 5,
  "requestId": 10,
  "score": 92.5,
  "status": "CONTACTED",
  "createdAt": "2026-01-28T10:00:00Z"
}
```

**ุญุงูุงุช ุงููุทุงุจูุฉ:**
| ุงูุญุงูุฉ | ุงููุตู |
|------|-------|
| NEW | ูุทุงุจูุฉ ุฌุฏูุฏุฉ ูู ูุชู ุงูุชูุงุตู ุจุดุฃููุง |
| CONTACTED | ุชู ุงูุงุชุตุงู ุจูู ุงูุทุฑููู |
| NEGOTIATION | ูู ูุฑุญูุฉ ุงูุชูุงูุถ |
| CLOSED | ุชูุช ุงูุตููุฉ ุจูุฌุงุญ |
| REJECTED | ุชู ุฑูุถ ุงููุทุงุจูุฉ |

---

## Users

### 1. Create User - ุฅูุดุงุก ูุณุชุฎุฏู ุฌุฏูุฏ

```
POST /users
Authorization: Bearer {token}
```

**ุงูุตูุงุญูุงุช ุงููุทููุจุฉ:** ADMIN, MANAGER, BROKER

**ุงููุตู:** ุฅูุดุงุก ุญุณุงุจ ูุณุชุฎุฏู ุฌุฏูุฏ

**ูุชุทูุจุงุช ุงูุทูุจ:**

```json
{
  "name": "ุนูู ูุญูุฏ",
  "email": "ali@example.com",
  "password": "password123",
  "role": "BROKER" // ุงุฎุชูุงุฑู (ุงูู ADMIN ููุท ููููู ุชุญุฏูุฏู)
}
```

**ุงูุงุณุชุฌุงุจุฉ ุงููุงุฌุญุฉ (201):**

```json
{
  "id": 2,
  "name": "ุนูู ูุญูุฏ",
  "email": "ali@example.com",
  "role": "BROKER",
  "createdAt": "2026-01-28T10:00:00Z"
}
```

**ููุงุนุฏ ุงูุฅูุดุงุก:**

- ุงูู **ADMIN** ููููู ุฅูุดุงุก ADMIN ุฃู MANAGER ุฃู BROKER
- ุงูู **MANAGER** ูุง ููููู ุฅูุดุงุก ูุณุชุฎุฏููู
- ุงูู **BROKER** ููููู ุฅูุดุงุก BROKER ููุท

---

### 2. Get All Users - ุงูุญุตูู ุนูู ุฌููุน ุงููุณุชุฎุฏููู

```
GET /users
Authorization: Bearer {token}
```

**ุงูุตูุงุญูุงุช ุงููุทููุจุฉ:** ADMIN, MANAGER ููุท

**ุงููุตู:** ุงูุญุตูู ุนูู ูุงุฆูุฉ ุจุฌููุน ุงููุณุชุฎุฏููู ูู ุงููุธุงู

**ุงูุงุณุชุฌุงุจุฉ ุงููุงุฌุญุฉ (200):**

```json
[
  {
    "id": 1,
    "name": "ุฃุญูุฏ ูุญูุฏ",
    "email": "ahmed@example.com",
    "role": "ADMIN",
    "createdAt": "2026-01-28T09:00:00Z"
  },
  {
    "id": 2,
    "name": "ุนูู ูุญูุฏ",
    "email": "ali@example.com",
    "role": "BROKER",
    "createdAt": "2026-01-28T10:00:00Z"
  }
]
```

---

## Notifications

### 1. Get Notifications - ุงูุญุตูู ุนูู ุงูุชูุจููุงุช

```
GET /notifications
Authorization: Bearer {token}
```

**ุงูุตูุงุญูุงุช ุงููุทููุจุฉ:** ADMIN, MANAGER, BROKER

**ุงููุตู:** ุงูุญุตูู ุนูู ุฌููุน ุงูุชูุจููุงุช ุงูุฎุงุตุฉ ุจุงููุณุชุฎุฏู ุงูุญุงูู

**ุงูุงุณุชุฌุงุจุฉ ุงููุงุฌุญุฉ (200):**

```json
[
  {
    "id": 1,
    "userId": 1,
    "matchId": 5,
    "message": "ุนุฑุถ ุฌุฏูุฏ ูุทุงุจู ุทูุจู!",
    "status": "UNREAD", // UNREAD, READ, ARCHIVED
    "createdAt": "2026-01-28T10:00:00Z",
    "match": {
      "id": 5,
      "score": 92.5,
      "offer": {
        "title": "ุดูุฉ ูู ูุณุท ุงูุจูุฏ",
        "type": "Apartment",
        "city": "Cairo",
        "priceFrom": 1000000
      },
      "request": {
        "type": "Apartment",
        "city": "Cairo",
        "budgetFrom": 1000000
      }
    }
  }
]
```

**ููุงุญุธุฉ:** ุงูุชูุจููุงุช ุชููุดุฃ ุชููุงุฆูุงู ุนูุฏูุง ูุชู ุงูุนุซูุฑ ุนูู ูุทุงุจูุฉ ุฌุฏูุฏุฉ

---

### 2. Update Notification - ุชุญุฏูุซ ุญุงูุฉ ุงูุชูุจูู

```
PATCH /notifications/{id}
Authorization: Bearer {token}
```

**ุงููุตู:** ุชุบููุฑ ุญุงูุฉ ุงูุชูุจูู (ูุฑุงุกุฉุ ุฃุฑุดูุฉุ ุฅูุฎ)

**ูุชุทูุจุงุช ุงูุทูุจ:**

```json
{
  "status": "READ" // ูู: UNREAD, READ, ARCHIVED
}
```

**ุงูุงุณุชุฌุงุจุฉ ุงููุงุฌุญุฉ (200):**

```json
{
  "id": 1,
  "userId": 1,
  "matchId": 5,
  "message": "ุนุฑุถ ุฌุฏูุฏ ูุทุงุจู ุทูุจู!",
  "status": "READ",
  "createdAt": "2026-01-28T10:00:00Z"
}
```

---

## Dashboard

### 1. Get Summary - ุงูุญุตูู ุนูู ููุฎุต ุงููุธุงู

```
GET /dashboard/summary
Authorization: Bearer {token}
```

**ุงูุตูุงุญูุงุช ุงููุทููุจุฉ:** ADMIN, MANAGER, BROKER

**ุงููุตู:** ุงูุญุตูู ุนูู ุฅุญุตุงุฆูุงุช ุนุงูุฉ ุนู ุงููุธุงู (ุนุฏุฏ ุงูุนุฑูุถ ูุงูุทูุจุงุช ูุงููุทุงุจูุงุช)

**ุงูุงุณุชุฌุงุจุฉ ุงููุงุฌุญุฉ (200):**

```json
{
  "offers": 150, // ุฅุฌูุงูู ุงูุนุฑูุถ
  "requests": 200, // ุฅุฌูุงูู ุงูุทูุจุงุช
  "matches": 450 // ุฅุฌูุงูู ุงููุทุงุจูุงุช
}
```

---

### 2. Get Top Brokers - ุฃูุถู ุงูุณูุงุณุฑุฉ

```
GET /dashboard/top-brokers
Authorization: Bearer {token}
```

**ุงูุตูุงุญูุงุช ุงููุทููุจุฉ:** ADMIN, MANAGER, BROKER

**ุงููุตู:** ุงูุญุตูู ุนูู ุฃูุถู 5 ุณูุงุณุฑุฉ ุญุณุจ ุนุฏุฏ ุงูุนุฑูุถ ุงูุชู ุฃูุดุฃููุง

**ุงูุงุณุชุฌุงุจุฉ ุงููุงุฌุญุฉ (200):**

```json
[
  {
    "brokerId": 1,
    "name": "ุฃุญูุฏ ูุญูุฏ",
    "count": 45 // ุนุฏุฏ ุงูุนุฑูุถ
  },
  {
    "brokerId": 3,
    "name": "ุนูู ุฃุญูุฏ",
    "count": 38
  }
  // ... ุฅูุฎ
]
```

---

### 3. Get Top Areas - ุฃูุถู ุงูููุงุทู

```
GET /dashboard/top-areas
Authorization: Bearer {token}
```

**ุงูุตูุงุญูุงุช ุงููุทููุจุฉ:** ADMIN, MANAGER, BROKER

**ุงููุตู:** ุงูุญุตูู ุนูู ุฃูุถู 5 ููุงุทู (ูุฏู) ุญุณุจ ุนุฏุฏ ุงูุนุฑูุถ

**ุงูุงุณุชุฌุงุจุฉ ุงููุงุฌุญุฉ (200):**

```json
[
  {
    "city": "Cairo",
    "_count": {
      "id": 85 // ุนุฏุฏ ุงูุนุฑูุถ
    }
  },
  {
    "city": "Giza",
    "_count": {
      "id": 60
    }
  }
  // ... ุฅูุฎ
]
```

---

## Audit

### Get Audit Logs - ุงูุญุตูู ุนูู ุณุฌูุงุช ุงูุชุฏููู

```
GET /audit-logs?resource=Offer&action=CREATE&userId=1&limit=100
Authorization: Bearer {token}
```

**ุงูุตูุงุญูุงุช ุงููุทููุจุฉ:** ADMIN, MANAGER ููุท

**ุงููุตู:** ุงูุญุตูู ุนูู ุณุฌู ูุงูู ุจุฌููุน ุงูุนูููุงุช ูู ุงููุธุงู (ุฅูุดุงุกุ ุชุญุฏูุซุ ุญุฐู)

**ูุนุงููุงุช ุงูุงุณุชุนูุงู:**
| ุงููุนุงูู | ุงูููุน | ุงููุตู |
|--------|-------|-------|
| resource | string | ููุน ุงูููุฑุฏ (Offer, Request, User, Match, etc.) |
| action | string | ููุน ุงูุฅุฌุฑุงุก (CREATE, UPDATE, DELETE) |
| userId | integer | ูุนุฑูู ุงููุณุชุฎุฏู ุงูุฐู ูุงู ุจุงูุนูููุฉ |
| startDate | date | ุชุงุฑูุฎ ุงูุจุฏุงูุฉ |
| endDate | date | ุชุงุฑูุฎ ุงูููุงูุฉ |
| limit | integer | ุนุฏุฏ ุงูุณุฌูุงุช (ุงูุชุฑุงุถู: 100) |

**ุงูุงุณุชุฌุงุจุฉ ุงููุงุฌุญุฉ (200):**

```json
[
  {
    "id": 1,
    "resource": "Offer",
    "action": "CREATE",
    "userId": 1,
    "changes": {
      "type": "Apartment",
      "city": "Cairo"
      // ... ุชูุงุตูู ุงูุชุบููุฑุงุช
    },
    "createdAt": "2026-01-28T10:00:00Z",
    "user": {
      "id": 1,
      "name": "ุฃุญูุฏ ูุญูุฏ",
      "email": "ahmed@example.com",
      "role": "ADMIN"
    }
  }
]
```

---

## Reports

### 1. Export Excel - ุชุตุฏูุฑ ููู Excel

```
GET /reports/export/excel?type=offers
Authorization: Bearer {token}
```

**ุงูุตูุงุญูุงุช ุงููุทููุจุฉ:** ADMIN, MANAGER ููุท

**ุงููุตู:** ุชุตุฏูุฑ ุงูุจูุงูุงุช ูู ููู Excel

**ูุนุงููุงุช ุงูุงุณุชุนูุงู:**
| ุงููุนุงูู | ุงูููุน | ุงููุตู |
|--------|-------|-------|
| type | string | ููุน ุงูุจูุงูุงุช (offers, requests, matches) |

**ุงูุงุณุชุฌุงุจุฉ ุงููุงุฌุญุฉ (200):**

- ููู Excel ูุชู ุชุญูููู ูุจุงุดุฑุฉ

**ูุซุงู ุนูู ุงููููุงุช:**

- `report-offers-1234567890.xlsx` - ูุงุฆูุฉ ุงูุนุฑูุถ
- `report-requests-1234567890.xlsx` - ูุงุฆูุฉ ุงูุทูุจุงุช
- `report-matches-1234567890.xlsx` - ูุงุฆูุฉ ุงููุทุงุจูุงุช

---

### 2. Export PDF - ุชุตุฏูุฑ ููู PDF

```
GET /reports/export/pdf?type=offers
Authorization: Bearer {token}
```

**ุงูุตูุงุญูุงุช ุงููุทููุจุฉ:** ADMIN, MANAGER ููุท

**ุงููุตู:** ุชุตุฏูุฑ ุงูุจูุงูุงุช ูู ููู PDF

**ูุนุงููุงุช ุงูุงุณุชุนูุงู:**
| ุงููุนุงูู | ุงูููุน | ุงููุตู |
|--------|-------|-------|
| type | string | ููุน ุงูุจูุงูุงุช (offers, requests, matches) |

**ุงูุงุณุชุฌุงุจุฉ ุงููุงุฌุญุฉ (200):**

- ููู PDF ูุชู ุชุญูููู ูุจุงุดุฑุฉ

**ูุซุงู ุนูู ุงููููุงุช:**

- `report-offers-1234567890.pdf` - ูุงุฆูุฉ ุงูุนุฑูุถ
- `report-requests-1234567890.pdf` - ูุงุฆูุฉ ุงูุทูุจุงุช
- `report-matches-1234567890.pdf` - ูุงุฆูุฉ ุงููุทุงุจูุงุช

---

## ููุงุญุธุงุช ูููุฉ

### 1. ุงููุตุงุฏูุฉ (Authentication)

- ุฌููุน ุงูู endpoints (ุนุฏุง `/auth/login`) ุชุชุทูุจ `JWT Token` ูู ุฑุฃุณ ุงูุทูุจ
- ุดูู ุงูู header:

```
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

### 2. ุฃููุงุท ุงูุตูุงุญูุงุช (Roles)

```
ADMIN:   - ุฑุคูุฉ ูุฅุฏุงุฑุฉ ูู ุดูุก
MANAGER: - ุฑุคูุฉ ูุนุธู ุงูุจูุงูุงุช
BROKER:  - ุฅุฏุงุฑุฉ ุนุฑูุถูู ูุทูุจุงุชูู ููุท
```

### 3. ูุธุงู ุงููุทุงุจูุฉ (Matching Engine)

- ุนูุฏ ุฅูุดุงุก ุนุฑุถ ุฌุฏูุฏุ ูุชู ุชุดุบูู ูุธุงู ุงููุทุงุจูุฉ ุชููุงุฆูุงู
- ุนูุฏ ุฅูุดุงุก ุทูุจ ุฌุฏูุฏุ ูุชู ุชุดุบูู ูุธุงู ุงููุทุงุจูุฉ ุชููุงุฆูุงู
- ุงููุทุงุจูุงุช ุงูุชู ุชูุนุซุฑ ุนูููุง ุชููููุฏ **ุชูุจููุงุช ุชููุงุฆูุฉ** ูููุณุชุฎุฏููู

### 4. ุณุฌูุงุช ุงูุชุฏููู (Audit Logs)

- ูู ุฅูุดุงุก ุฃู ุชุญุฏูุซ ุฃู ุญุฐู ูุชู ุชุณุฌููู ุชููุงุฆูุงู
- ูููู ููู ADMIN ู MANAGER ุงูุงุทูุงุน ุนูู ุฌููุน ุงูุณุฌูุงุช
- ูููุฏ ุฌุฏุงู ููุชุชุจุน ูุงููุฑุงุฌุนุฉ

### 5. ูุนุงููุงุช ุงูุฃุฎุทุงุก ุงูุดุงุฆุนุฉ

| ููุฏ ุงูุฎุทุฃ | ุงููุตู                                                 |
| --------- | ----------------------------------------------------- |
| 400       | ุทูุจ ุบูุฑ ุตุญูุญ (ุจูุงูุงุช ูุงูุตุฉ ุฃู ุบูุฑ ุตุญูุญุฉ)              |
| 401       | ุบูุฑ ูุตุฑุญ (ุจูุงูุงุช ุงุนุชูุงุฏ ุฎุงุทุฆุฉ ุฃู ุชููู ููุชูู ุงูุตูุงุญูุฉ) |
| 403       | ูุง ุชูุฌุฏ ุตูุงุญูุงุช ูุงููุฉ                                 |
| 404       | ุงูููุฑุฏ ุบูุฑ ููุฌูุฏ                                      |
| 500       | ุฎุทุฃ ูู ุงูุฎุงุฏู                                         |

---

## ูุซุงู ุนูู ุณูุฑ ุงูุนูู ุงููุงูู

```
1. ุชุณุฌูู ุงูุฏุฎูู
   POST /auth/login
   โ ุงูุญุตูู ุนูู Token

2. ุฅูุดุงุก ุนุฑุถ ุฌุฏูุฏ
   POST /offers
   โ ูุชู ุชุดุบูู ูุธุงู ุงููุทุงุจูุฉ ุชููุงุฆูุงู

3. ุงูุญุตูู ุนูู ุงููุทุงุจูุงุช
   GET /matches
   โ ุฑุคูุฉ ุฌููุน ุงููุทุงุจูุงุช

4. ุชุญุฏูุซ ุญุงูุฉ ุงููุทุงุจูุฉ
   PATCH /matches/{id}
   โ ุชุณุฌูู ุชูุฏู ุงูููุงูุถุงุช

5. ุงูุญุตูู ุนูู ุงูุชูุจููุงุช
   GET /notifications
   โ ุฑุคูุฉ ุฌููุน ุงูุชูุจููุงุช

6. ุชุตุฏูุฑ ุชูุฑูุฑ
   GET /reports/export/excel?type=matches
   โ ุชุญููู ููู Excel ุจุฌููุน ุงููุทุงุจูุงุช
```

---

**ุชู ุฅูุดุงุก ูุฐู ุงููุซููุฉ ูุชุณููู ุงูุนูู ุนูู ุงูู Frontend**
